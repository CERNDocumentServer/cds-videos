<div ng-init="showAll=false" class="cds-deposit-box">
  <div class="alerts" ng-repeat="alert in $ctrl.cdsDepositCtrl.alerts">
    <div class="alert alert-{{alert.type}} alert-dismissible" role="alert">
      <button ng-click="$ctrl.cdsDepositCtrl.dismissAlert(this)" type="button" class="close" data-dismiss="alert" aria-label="Close"><span aria-hidden="true">&times;</span></button>
      {{ alert.message }}
    </div>
  </div>
  <div class="row">
    <div class="col-sm-12">
      <!-- Brief view of the video -->
      <div class="row">
        <div class="col-sm-9">
          <h3 class="mb-5 mt-0">{{ $ctrl.cdsDepositCtrl.record.title.title || 'No project title'}}</h3>
          <p>{{ $ctrl.cdsDepositCtrl.record.description.value || 'No description'}}</p>
        </div>
        <div class="col-sm-3">
          <div class="text-right">
            <ul class="list-inline">
              <li><span ng-show="$ctrl.cdsDepositCtrl.record.category" class="label label-default">{{$ctrl.cdsDepositCtrl.record.category}}</span></li>
              <li><span ng-show="$ctrl.cdsDepositCtrl.record.type" class="label label-warning">{{$ctrl.cdsDepositCtrl.record.type}}</span></li>
            </ul>
          </div>
        </div>
      </div>
      <div ng-show="showAll">
        <!-- Brief view of the video -->
        <ul ng-init="active='metadata'" class="nav nav-tabs mt-20" role="tablist">
          <li role="presentation" ng-class="{active: active=='metadata'}"><a ng-click="active='metadata'" role="tab" data-toggle="tab">Basic Info</a></li>
          <li role="presentation" ng-class="{active: active=='licenses'}"><a ng-click="active='licenses'" role="tab" data-toggle="tab">Licenses</a></li>
          <li role="presentation" ng-class="{active: active=='title_translations'}"><a ng-click="active='title_translations'" role="tab" data-toggle="tab">Title translations</a></li>
          <li role="presentation" ng-class="{active: active=='description_translations'}"><a ng-click="active='description_translations'" role="tab" data-toggle="tab">Description translations</a></li>
        </ul>
        <!-- Tab panes -->
        <div class="tab-content cds-tab-content pa-20 ">
          <div ng-show="active=='metadata'" role="tabpanel" ng-class="{active: active=='metadata'}" class="tab-pane">
            <div class="row">
              <div class="col-sm-6">
                <form
                  name="$ctrl.cdsDepositCtrl.depositFormModel"
                  class="form-horizontal"
                  sf-schema="$ctrl.cdsDepositCtrl.schema"
                  sf-form="$ctrl.form.basic.leftColumn"
                  sf-model="$ctrl.cdsDepositCtrl.record"
                  sf-options="{formDefaults: { disableSuccessState: true, feedback: false, onChange: '$ctrl.removeValidationMessage(modelValue,form)', ngModelOptions: { updateOn: 'default blur', allowInvalid: true} } }"
                ></form>
              </div>
              <div class="col-sm-6">
                <form
                  name="$ctrl.cdsDepositCtrl.depositFormModel"
                  class="form-horizontal"
                  sf-schema="$ctrl.cdsDepositCtrl.schema"
                  sf-form="$ctrl.form.basic.rightColumn"
                  sf-model="$ctrl.cdsDepositCtrl.record"
                  sf-options="{formDefaults: { disableSuccessState: true, feedback: false, onChange: '$ctrl.removeValidationMessage(modelValue,form)', ngModelOptions: { updateOn: 'default blur', allowInvalid: true} } }"
                ></form>
              </div>
            </div>
          </div>
          <div ng-show="active=='licenses'" role="tabpanel" ng-class="{active: active=='licenses'}" class="tab-pane">
            <div class="row">
              <div class="col-sm-12">
                <form
                  name="$ctrl.cdsDepositCtrl.depositFormModel"
                  class="form-horizontal"
                  sf-schema="$ctrl.cdsDepositCtrl.schema"
                  sf-form="$ctrl.form.licenses"
                  sf-model="$ctrl.cdsDepositCtrl.record"
                  sf-options="{formDefaults: { disableSuccessState: true, feedback: false, onChange: '$ctrl.removeValidationMessage(modelValue,form)', ngModelOptions: { updateOn: 'default blur', allowInvalid: true} } }"
                ></form>
              </div>
            </div>
          </div>
          <div ng-show="active=='title_translations'" role="tabpanel" ng-class="{active: active=='title_translations'}" class="tab-pane">
            <div class="row">
              <div class="col-sm-12">
                <form
                  name="$ctrl.cdsDepositCtrl.depositFormModel"
                  class="form-horizontal"
                  sf-schema="$ctrl.cdsDepositCtrl.schema"
                  sf-form="$ctrl.form.title_translations"
                  sf-model="$ctrl.cdsDepositCtrl.record"
                  sf-options="{formDefaults: { disableSuccessState: true, feedback: false, onChange: '$ctrl.removeValidationMessage(modelValue,form)', ngModelOptions: { updateOn: 'default blur', allowInvalid: true} } }"
                ></form>
              </div>
            </div>
          </div>
          <div ng-show="active=='description_translations'" role="tabpanel" ng-class="{active: active=='description_translations'}" class="tab-pane">
            <div class="row">
              <div class="col-sm-12">
                <form
                  name="$ctrl.cdsDepositCtrl.depositFormModel"
                  class="form-horizontal"
                  sf-schema="$ctrl.cdsDepositCtrl.schema"
                  sf-form="$ctrl.form.description_translations"
                  sf-model="$ctrl.cdsDepositCtrl.record"
                  sf-options="{formDefaults: { disableSuccessState: true, feedback: false, onChange: '$ctrl.removeValidationMessage(modelValue,form)', ngModelOptions: { updateOn: 'default blur', allowInvalid: true} } }"
                ></form>
              </div>
            </div>
          </div>
        </div>
      </div>
      <!-- Tab panes -->
      <div class="text-center">
        <a class="btn btn-default btn-sm" ng-click="showAll=!showAll">{{ showAll ? 'Show less' : 'Edit' }}</a>
      </div>
    </div>
  </div>
</div>
