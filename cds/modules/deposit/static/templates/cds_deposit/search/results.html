<div ng-if="vm.invenioSearchResults.hits.total != 0">
  <a class="list-group-item cds-tasks-state-left-border"
      ng-init="state = (record.metadata._deposit.state | overallState)"
      ng-repeat="record in vm.invenioSearchResults.hits.hits track by $index"
      ng-class="{'cds-tasks-error': state === 'DEPOSIT_STATE/FAILURE' && record.metadata._deposit.status === 'draft',
                 'cds-tasks-success': state === 'DEPOSIT_STATE/SUCCESS'&& record.metadata._deposit.status === 'draft',
                 'cds-tasks-pending': state === 'DEPOSIT_STATE/PENDING' && record.metadata._deposit.status === 'draft',
                 'cds-tasks-started': state === 'DEPOSIT_STATE/STARTED' && record.metadata._deposit.status === 'draft',
                 'cds-deposit-published': record.metadata._deposit.status === 'published'
               }"
      target="_self" ng-href="/deposit/{{ record.metadata._deposit.id }}">
      <div class="row">
        <div class="col-sm-7">
          <h4 class="t-b mt-0">
            <b>{{ record.metadata.title.title || 'No title' }}</b>
          </h4>
          <p>
            {{ record.metadata.description.value | stripTags }}
          </p>
          <ul class="list-inline">
            <li><span ng-show="record.metadata.category" class="label label-default">{{record.metadata.category}}</span></li>
            <li><span ng-show="record.metadata.type" class="label label-warning">{{record.metadata.type}}</span></li>
          </ul>
          <p class="list-group-item-text text-muted">
            <small>Created on {{ record.created | date:'medium' }}, last updated on {{ record.updated | date:'medium' }}</small>
          </p>
        </div>
        <div class="col-sm-3">
          <ul ng-if="record.metadata._deposit.status != 'published'" class="list-unstyled">
            <li class="small" ng-repeat="(task, status) in (record.metadata._deposit.state | orderTasks)">
              <i class="fa fa-fw {{ status | progressIcon }} {{ status | progressClass }}"></i> {{ task | taskRepr }}
            </li>
          </ul>
        </div>
        <div class="col-sm-2">
          <div class="text-right" ng-if="record.metadata._deposit.status === 'draft'">
            <small><i class="fa fa-edit"></i> Draft</small>
          </div>
          <div class="text-right" ng-if="record.metadata._deposit.status === 'published'">
            <small><i class="fa fa-check text-primary"></i> Published</small>
          </div>
        </div>
      </div>
  </a>
</div>

<div ng-if="vm.invenioSearchResults.hits.total == 0 && vm.invenioSearchArgs.q">
  <div class="list-group">
    <div class="list-group-item">
      <div class="text-center">
        <h3>No results found for <em>'{{ vm.invenioSearchArgs.q }}'</em></h3>
      </div>
    </div>
  </div>
</div>

<div ng-if="vm.invenioSearchResults.hits.total == 0 && !vm.invenioSearchArgs.q && vm.invenioSearchResults.aggregations.status.buckets.length == 0">
  <div class="list-group">
    <div class="list-group-item">
      <div class="jumbotron" align="center" class="hidden-sm hidden-xs">
        <h1>Get started!</h1>
        <p>Make your first upload.</p>
        <h1>
          <a class="btn btn-success btn-lg" href="/deposit/new">
            <i class="fa fa-upload"></i> New Upload
          </a>
        </h1>
      </div>
    </div>
  </div>
</div>

<div ng-if="vm.invenioSearchResults.hits.total == 0 && !vm.invenioSearchArgs.q && vm.invenioSearchResults.aggregations.status.buckets.length != 0">
  <div class="list-group">
    <div class="list-group-item">
      <div class="jumbotron" align="center" class="hidden-sm hidden-xs">
        <h1>Get started!</h1>
        <p>Upload a new video.</p>
        <h1>
          <a class="btn btn-success btn-lg" href="/deposit/new">
            <i class="fa fa-upload"></i> New Upload
          </a>
        </h1>
      </div>
    </div>
  </div>
</div>
